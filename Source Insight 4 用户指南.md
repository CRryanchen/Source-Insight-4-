# Source Insight 4 用户指南

Source Insight - 版本 4
1987-2018年版权，由Source Dynamics 股份有限公司出版。

本文档及其中描述的软件受版权保护，保留所有权利。根据版权法，未经Source Dynamics 股份有限公司事先书面许可，不得将文档或软件全部或部分复制，影印，重置，翻译或简化为任何电子媒介或机器可读形式。

免责声明和责任限制

本手册及其中描述的软件由Source Dynamics 股份有限公司制作，如有更改，恕不另行通知。Source Dynamics 股份有限公司对由此处包含的任何不准确或遗漏或由使用此处包含的信息或程序产生的后果不承担任何责任。

Source Dynamics 股份有限公司对这些程序或本手册中的补充文档不做任何明示或暗示的保证。在任何情况下，Source Dynamics 股份有限公司均不对提供，执行或使用程序或文档相关的或由此引起的偶然或间接损害承担责任。本免责声明包括但不限于因使用或操作随附软件而导致的任何服务中断，业务损失或预期利润或间接损失。

Source Insight 是Source Dynamics 股份有限公司的商标。
其他产品名称是其各自制造商的商标。

 

Source Insight 股份有限公司
22525 SE 64th, Suite 260
Issaquah, WA 98027
USA

电话：(425)557 - 425
传真：(425)557 - 425
网站：sourceinsight.com

技术支持：support@sourceinsight.com
销售售：sales@sourceinsight.com

## 一、开始

**入门**

​		欢迎来到 Source Insight。

​		我们希望使用 Source Insight 可以提高您的工作效率和编码乐趣。 它的创建是出于导航大型代码库的需要，并有助于在工作和计划时理解复杂的代码。

​		今天，重要的技术公司正在使用 Source Insight 来开发一些最大的商业硬件和软件产品。

**主要优势**

​		Source Insight 的重要优势是：

* 它有助于理解现有的代码库。
* 您可以快速导航函数调用和调用者。
* 您几乎可以立即找到对函数、变量等的引用。
* 您可以看到调用图和类树图。
* 它无需打开文件即可预览函数和类定义。
* 它使用语法格式显示对变量和其他声明的实时引用。
* 它具有强大的编辑功能，包括代码片段、符号自动完成和智能重命名。
* 动态信息面板协同工作以创建高效的工作流程。

**安装 Source Insight**

​		一旦在一台机器上安装了 Source Insight，该机器上的任何用户都可以使用它，但许可会根据操作系统是否为服务器而有所不同。

​		在桌面操作系统上，Source Insight 是按机器授权的。 为整台机器存储了一个许可证。 安装并激活后，您可以从计算机上的任何用户帐户运行 Source Insight。

​		在服务器操作系统（包括终端服务器）上，Source Insight 是按用户授权的。 它必须为每个用户单独激活，并且为每个用户存储一个许可证。

**激活 Source Insight**

​		Source Insight 需要通过 Internet 进行初始激活。 激活过程是版本 4 的新功能，我们将其设计为对用户的影响非常小。 请理解，激活可保护您的许可证，验证您的序列号，并允许我们继续开发 Source Insight。

​		首次启动 Source Insight 时，将出现“管理许可证”窗口。 请参阅：管理许可证。系统将提示您输入序列号或开始新的试用许可证。 试用许可证运行 30 天。 您不需要序列号即可使用试用许可证。

​		出现提示时，请输入您的姓名和电子邮件地址。 您的电子邮件地址是可选的，但我们强烈建议您提供，这样您就可以在丢失许可证时找回您的许可证。 这也使我们能够在有任何重要更新可用时通知您。

​		然后，Source Insight 将使用我们的许可系统激活您的许可。 一两秒钟后，您的许可证将被激活，您无需再次激活。

​		当您激活许可证时，Source Insight 会通过安全的 SSL 连接将您提供的信息以及硬件指纹发送到我们的许可系统，以便我们可以将许可证与机器相匹配。 您仍然可以在不使安装失效的情况下进行大多数硬件更改。 我们尊重您的隐私，我们明确不会与任何第三方分享您的信息。

​		如果您对激活过程有任何问题或疑问，请发送电子邮件至 info@sourceinsight.com。

**转让您的许可证 - 停用**

​		如果您决定停止使用 Source Insight，或者想在另一台机器上使用您的许可证，您应该首先通过选择帮助 > 管理许可证并选择“停用许可证”来停用旧机器上的许可证。 这会减少您的激活次数，以便您可以在另一台机器上激活它。 一个许可证最多可为您激活两台机器。

​		如果您无法再访问您的旧机器（停用它），请尝试在您的新机器上简单地安装和激活。 它很有可能会很好地激活。 我们允许在一段时间内有一定数量的超额。 如果激活次数过多导致激活失败，请联系info@sourceinsight.com

**激活问题**

问：我可以多次激活 Source Insight 吗？
		Source Insight 许可证允许您同时在最多 3 台机器上激活 Source Insight，前提是只有一个人在使用该软件。 例如，您可以将它安装在您工作时的两台台式机和笔记本电脑上。 因此，每个许可证最多可以激活 3 台机器。 但是，只有一个人可以使用一个许可证。 多人不得共享一个许可证。

​		如果出于某种原因您在同一台机器上多次激活它，则它不计入您的两次激活限制。



问：如何将我的许可证转移到新机器上？
		要将许可证转移到新机器，您应该先在旧机器上停用 Source Insight，方法是选择“帮助”>“管理许可证”，然后选择“停用许可证”。 停用会减少您的激活计数，以便您可以在另一台机器上激活它而不会超过您的激活限制。 单个许可证最多可为您激活 3 台机器（对于单个用户）。

​		当您在新机器上激活时，您将需要提供您的许可证序列号。 使用与以前相同的序列号。



问：如何获得序列号？
		当您购买许可证时，您将获得一个有效的许可证序列号。 它通常通过电子邮件发送给您。



问：如何开始试用许可证？
		启动 Source Insight。 当“管理许可”窗口出现时，选择“开始试用”，然后单击“继续”。



问：试用许可证需要序列号吗？
		您不需要序列号即可开始试用许可证。 当您开始试用许可证时，将分配给您一个特殊的试用序列号。



问：我想将我的许可证转移到一台新机器上，但无法再访问我的旧机器来停用它。
		首先，请尝试在您的新机器上简单地安装并激活。 它很有可能会很好地激活。 我们允许在一段时间内有一定数量的超额。 如果激活次数过多导致激活失败，请联系info@sourceinsight.com。



问：如果我更换硬件会怎样？
		更改硬件不太可能会使您的许可证激活失效。 如果更换主驱动器，则必须重新安装并再次激活 Source Insight。 即使那样，许可系统也允许在一段时间内进行一定数量的更改。 如果您拥有有效的许可证，我们绝对不希望您被卡住。



问：如果我重新格式化我的驱动器并重新安装 Source Insight 会怎样？
		当您重新安装并运行 Source Insight 时，系统将提示您再次激活。 但是，这主要是在您的机器上刷新许可证，不会算作新的激活。



问：如果我没有互联网连接怎么办？
		激活过程将延迟一段时间，直到您可以连接到 Internet，因此您仍然可以使用它。 如果您的机器永远无法连接到 Internet，我们可以通过电子邮件向您发送激活的许可证文件。 请将请求通过电子邮件发送至 activation@sourceinsight.com 并提供有关您或预期最终用户的以下信息：

* 用户名
* 公司或组织，如果适用
* 用户的电子邮件地址
* 许可证序列号



问：激活使用哪些网络端口来设置防火墙/代理？
		激活过程使用端口 443 (HTTPS) 连接到 sls.sourceinsight.com。 您可以使用此 URL 测试与 Web 浏览器的连接：https://sls.sourceinsight.com/lsstatus/。注意：您必须包括尾部斜杠。

​		网页将显示“OK”，表明许可证服务器已启动。 注意：截至 2017 年 11 月，我们解决了一个可能会阻止某些代理到达我们的许可服务器的问题。



问：为什么 Source Insight 需要激活？
		我们对此进行了长时间的考虑，并决定某种形式的许可证验证是有帮助的。 Source Insight 的过去版本没有激活，这导致许多非法许可证被使用，甚至被出售给毫无戒心的客户。

​		此外，许多使用 Source Insight 的客户和公司都想知道他们的许可证是真实的，并希望有一种方法可以自动遵守许可协议。

​		我们将激活系统设计为影响非常小，并且有利于合法用户。 许可系统允许在一段时间内进行一定数量的激活超额，因此任何有效许可证都不太可能无法激活。 我们绝对不希望任何人在拥有有效许可证的情况下被困住。

### 与旧版本 Source Insight 的兼容性

​		如果您使用过旧版本的 Source Insight，例如 3.x 版，您可能会发现本节中的主题很有用。

​		您可以在同一台机器上同时使用 Source Insight 版本 4 和版本 3。 它们各自使用单独的文件和 Windows 注册表设置，因此它们不会发生冲突。 工程数据文件格式不同，但文件扩展名不同，应该不会冲突。

**从版本 3 打开项目**

​		要打开旧版本 3.x 项目，请选择“项目”>“打开项目...”，然后单击“浏览”按钮找到旧项目 .PR 文件。 旧项目将被复制为新格式。 原始版本 3 项目将保持不变。

**从版本 3 导入配置设置**

​		当您首次安装并运行 Source Insight 时，它会查找旧版本。 如果它找到一个旧的配置文件，它会提示您导入设置。

​		要随时导入版本 3 配置设置，请选择选项 > 加载配置，然后导航至您的版本 3 配置文件。 它通常存储在这里：C:\Users\<user-name>\Documents\Source Insight\GLOBAL.CF3\其中 C: 是您的系统盘符，\<user-name> 是帐户用户名。

==**版本 3 的重要变化**==（我感觉是与版本3相比的重要变化）

​		为了使程序更易于理解，一些内容已被移动或重命名。

* 版本 3 中称为“文档选项”(Document Options)的内容现在称为文件类型选项(File Type Options)。 它包含所有特定于文件类型的选项。 例如，有一个名为“C/C++ 文件(C/C++ Files)”的文件类型。 “文档类型”一词已替换为“文件类型”。 请参阅：文件类型。
* C 和 C++ 文件类型已合并为“C/C++ 源文件(C/C++ Source File)”
* 版本 3 中称为“草稿视图(Draft View)”的内容现在称为“单一字体视图(Mono Font View)”
* 以前在版本 3 中称为“符号音节(symbol syllables)”的东西现在称为“名称片段(name fragments)”。
* 可停靠/浮动窗口(Dock-able/Floating windows )现在称为面板(Panels)。 除了上下文和关系窗口(Context and Relation window)，还有一些新面板，例如 FTP 浏览器(FTP Browser)、窗口列表(Window List)、片段(Snippets)、书签(Bookmarks)、目录比较(Directory Compare)和文件比较(File Compare)。
* 项目文件 - 主项目文件的新扩展名为 .siproj。 所有数据文件格式都已从版本 3 开始更改。您仍然可以打开版本 3 项目，但它们将被转换为新格式。
* Project Symbol Path 理念已被 Project > Import External Symbols 取代。 此功能允许您从外部源导入符号，例如头文件、.NET 程序集和 Java jar 文件。 每次您导入某些内容时，Source Insight 都会为您创建一个特殊的“导入”项目。 它会自动在那里搜索符号。 如果需要，您仍然可以使用项目符号路径。 请参阅：从库中导入符号。
* 项目设置现在有一个“备份目录(Backup Directo
* 现在所有项目共享相同的配置设置。 然而，当涉及到项目特定的配置部分时，配置文件系统具有一定的灵活性。 请参阅：自定义设置和配置。

### 版本 4 中的新功能

​		Source Insight 第 4 版中添加了许多新功能。 以下是一些亮点：

* 改进了 C/C++、C#、Java 和其他语言的语言解析。
* 现在内置了对 Objective-C、Python、PHP、XML 和 JSON 文件的语言支持。
* 从外部源导入符号，例如 .NET 程序集、Java JAR 文件和包含文件。 使用 Project > Import External Symbols 来执行此操作。 请参阅：从库中导入符号。
* 文件窗口选项卡出现在主应用程序窗口的顶部。 右键单击它们并选择“窗口选项卡选项(Window Tab Options )”以更改排序顺序。
* 可折叠的代码块。 您可以通过选择 Options > Preferences: Windows 并参考 Outline and Nesting 部分来控制位置和外观。 请参阅：概述和折叠文本。
* 文件和目录比较 (diff)。 从“工具”菜单调用它们。 请参阅：文件比较。 请参阅：目录比较。
* 适用于大括号语言（例如 C/C++ 和 C#）的代码美化器。 请参阅：代码美化器。
* Unicode 支持
* 带有面板和视觉主题的新用户界面。 请参阅：视觉主题。
* 新概览滚动条的位置类似于滚动条，但可以让您鸟瞰文件。 它的工作方式与滚动条略有不同，但您可以使用它来滚动。 它可以向您显示当前函数的边界，并帮助您在较长的函数中定位。 请参阅：概览滚动条。
* 新增强的垂直滚动条在滚动条内显示更多细节。 右键单击它并选择滚动条选项以使用其设置。 请参阅：滚动条选项。
* 您可以快速切换的多个窗口布局。 使用“视图”>“加载/保存布局”，或单击其中一个布局工具栏按钮可在 4 种不同的布局预设之间快速切换。 请参阅：使用布局保存窗口排列。
* 代码片段 - 定义要插入的代码模板。 选择工具 > 激活代码片段窗口以显示代码片段面板。 片段用于您要插入的样板文本。 您可以将文本变量放在插入代码段时展开的代码段文本中。 例如 $date$ 被替换为当前日期。 请参阅：代码片段。
* 改进的书签 - 书签现在永久存储，它们存储为与附近函数或类名的行偏移量。 每个项目都有自己的书签列表。 请参阅：书签。
* 改进的关系窗口 - 参考查找更快。 函数还有一种新的关系类型：“调用和调用者”。 这显示在相同的轮廓或图表中。 您还可以将图形视图复制到窗口剪贴板。 请参阅：关系窗口。
* 维护每个项目的备份文件，并轻松与备份版本进行比较。 使用工具 > 与备份文件比较可快速将当前文件与备份版本进行比较。 您还可以使用“文件”>“打开备份文件”打开当前文件的旧版本。 请参阅：备份文件。
* 更好的正则表达式 - 现在支持 Perl 兼容和多行表达式。 大多数让您输入正则表达式的地方现在都有一个列表，您可以在其中选择 RegEx 的类型。 有经典 Source Insight 正则表达式和 Perl 兼容正则表达式的常规和“多行”版本。 多行正则表达式类型基本上匹配带有点 (.) 字符的换行符。 因此，例如，.* 将匹配整个文件。 而“start.*end”会找到文件中从“start”到“end”的所有内容，甚至跨越换行符。
* 更好地支持大型项目。 虚拟内存的使用得到了改进，因此非常大的项目可以更好地适应内存空间。 对于大量符号，版本 3 可能会在项目索引文件上发生文件读取错误，从而导致项目损坏。 这已被淘汰。
* 通过使用主文件列表，可以更轻松地管理多个用户和机器的项目。 一个项目可以有一个 MFL，它可以是您的源代码存储库的一部分并与其他人共享。 它是一个简单的文本文件，列出了项目中的所有文件（和/或目录）。 请参阅：使用主文件列表。
* 将项目源导出到 HTML 站点。 您可以使用它来将所有文件导出为 HTML 版本，其中包含您在 Source Insight 中看到的大部分相同语法格式。 这基本上构建了一个可用于浏览项目源代码的网站。 请参阅：将项目导出为 HTML。
* 浏览器模式 - Source Insight 表现为只读代码浏览器。 在此模式下，您无法编辑文件。 只需单击标识符即可跳转到定义，就像在网络浏览器中一样。 按 Backspace 键返回，然后在光标位于符号名称上时按 Space 键跳转到其定义。 单击以进行常规选择时按住 CTRL。 请参阅：浏览器模式。
* 附加到每个源文件窗口的符号窗口窗格现在有一个可折叠的大纲视图。
* 全新的配置系统，将您的所有设置保存在 XML 文件中。
* 整个程序的许多改进！

**文件格式更改**

Source Insight 创建和维护的几个数据文件在版本 4 中发生了变化。

* 项目文件 - 主项目文件的新扩展名为 .siproj。 所有项目数据文件格式都已从版本 3 开始更改。您仍然可以打开版本 3 项目，但它们将被转换为新格式。
* 配置文件 - 所有配置设置现在都保存在 XML 文件中。 由于配置变化太大，不支持3.5版本的配置文件。
* 工作区文件 - 新扩展名为 .siwork。 这些与版本 3 不兼容。
* 恢复文件 - 新扩展名是 .si_recovery。

**文件存储**

Source Insight 4 将其大部分数据存储在 \<HOMEDRIVE>/users/\<user-name>/Documents/Source Insight 4.0 中。

“Documents/Source Insight 4.0”文件夹中的文件夹如下：

<center>表 1.1：用户文档区中的文件夹和文件</center>

| 文件夹名称         | 描述                                                         |
| ------------------ | ------------------------------------------------------------ |
| Backup             | 存储非项目文件的文件备份。                                   |
| Bookmarks          | 所有项目中使用的“全局”书签。                                 |
| Clips              | 剪辑存储。 请参阅剪辑功能。                                  |
| Logs               | 日志文件。 由Options > Preferences: General : Log­ging...控制 |
| Projects           | 每个项目在此文件夹中都有一个数据文件夹。                     |
| Settings           | 您的配置设置、主题和布局。                                   |
| Snippets           | 代码片段                                                     |
| c.tom file         | C/C++ 预处理器标记宏。                                       |
| FileAlias.txt file | 将不带扩展名的文件名映射到文件类型                           |

## 二、用户界面

本章描述了 Source Insight 程序的主要窗口和有关使用 Source Insight 中可用的不同窗口的一般信息。

Source Insight 的用户界面主要包括：

* 顶部的主菜单和工具栏区域。
* 编辑文件的源文件窗口。
* 可停靠或浮动的面板窗口。

Source Insight 是一个选项卡式 MDI（多文档界面）应用程序。 这意味着您打开的每个源文件在 Source Insight 应用程序窗口中都有自己的子窗口。 此外，文件窗口选项卡出现在工具栏区域正下方的顶部。

在下面的屏幕截图中，Source Insight 应用程序主窗口包含顶部的主工具栏、中间的源文件窗口和一些停靠在右侧的面板窗口。 源文件中声明的符号出现在符号面板的左侧。

![image-20230131135821130](Source Insight 4 用户指南.assets/image-20230131135821130.png)

下面是一个典型的窗口布局，显示了源文件窗口、关系窗口和上下文窗口。 Source Insight 程序主窗口，显示一个源文件窗口，左侧有一个符号窗口，右侧有一个关系窗口。 上下文窗口停靠在底部边缘。

![image-20230131135929288](Source Insight 4 用户指南.assets/image-20230131135929288.png)

想要查询更多的信息：

请参阅：关系窗口。

请参阅：上下文窗口。

### 源文件窗口

您打开的每个文件都将显示在单独的源文件窗口中。 Source Insight 是一个选项卡式多文档界面 (MDI) 应用程序。 每个源文件窗口的左侧都有一个符号窗口。 如果你愿意，你可以隐藏这个窗口。

![image-20230131140114757](Source Insight 4 用户指南.assets/image-20230131140114757.png)

当您打开一个源文件时，它会出现在它自己的源文件窗口中。 此窗口是您进行所有常规编辑的地方。 文件窗口选项卡出现在主源文件区域上方。

当您打开一个附加了语言的文件时，符号窗口将附加到源文件窗口的左侧。 您可以通过选择文件类型和选项(File Types And Options )并相应地设置使用符号窗口复选框来控制是否使用符号窗口(Use symbol window )。 请参阅：文件类型选项。

下面是一个源文件窗口，它的左侧有一个符号窗口，源窗口的右边缘有可选的 Overview Scroller 控件。

![image-20230131140545146](Source Insight 4 用户指南.assets/image-20230131140545146.png)

**符号窗口**

符号窗口出现在每个源文件窗口的左侧。 符号窗口列出了文件中声明的所有符号，以便在每个文件中轻松导航，并提供文件的快速概览。 例如，它列出了所有函数、结构、类、宏、常量等。 Symbol Window 列表中每一项的左侧都有一个小图标，用于描述符号的类型。 符号窗口还显示#ifdef-#endif 嵌套级别。

Source Insight 动态更新符号窗口。 如果您输入新的声明，该符号将立即出现在符号窗口中。

数据结构符号（例如类）以粗体显示。 此外，长度大于该文件中平均值的函数以粗体显示。 这个想法是更大的功能可能更重要。

您还可以将符号从一个符号窗口拖到另一个窗口，或拖到同一文件中。

![image-20230131142805458](Source Insight 4 用户指南.assets/image-20230131142805458.png)

符号窗口的底部是一个小工具栏。 有用于对列表进行排序的控件。 您可以右键单击符号窗口以调出其快捷菜单。

自定义符号窗口

右键单击符号窗口并选择“符号窗口属性(Symbol Window Properties)”以更改其设置。 请参阅：符号窗口选项。

更改符号窗口的宽度

要更改符号窗口的宽度，请单击窗口的右边缘并拖动。 这只会调整当前窗口的大小。 如果要更改所有其他窗口的大小，请调整其大小，然后右键单击它并选择“保存设置(Save Settings)”

永久更改符号窗口的宽度

要永久更改符号窗口的宽度以及其他文件中所有未来的符号窗口，请通过拖动右边缘来调整窗口大小。 然后，右键单击符号窗口并选择“保存设置”。 这会记录窗口的宽度、符号排序和符号类型过滤，并将这些参数用作从现在开始创建的新窗口的新默认值。

### 面板窗口

面板窗口是可以浮动在主应用程序窗口前面的工具窗口，它们可以停靠在主窗口的各个位置。 通过将浮动窗口拖动到主窗口的边缘，您可以将其停靠到主窗口。 面板窗口可以浮动在应用程序窗口之外，甚至可以浮动在另一台显示器上。

下面是浮动在主应用程序窗口前面的片段窗口的示例。 Snippet Window 是位于 Source Insight 主窗口前面的浮动窗口的示例。 您还可以将其停靠在程序窗口的边缘。

![image-20230131143126602](Source Insight 4 用户指南.assets/image-20230131143126602.png)

当您将面板窗口彼此靠近或靠近 Source Insight 应用程序窗口的边缘时，面板窗口会出现粘性行为。 它们将捕捉到相邻窗口的边缘，并且如果调整相邻面板窗口的大小时它们将自动调整大小。

所有面板窗口的停靠和浮动布局都保存在一个布局文件中。 您可以通过选择“视图”>“加载布局...”(View > Load Layout...)或单击“布局”工具栏中的 A-D 布局按钮之一来快速加载不同的面板布局：

![image-20230131143229154](Source Insight 4 用户指南.assets/image-20230131143229154.png)

面板窗口有：

* 项目符号列表(Project Symbol List ) - 显示项目中的所有函数、类和其他符号。
* 项目文件列表(Project Files List ) - 显示项目中的所有文件。
* 项目文件类型列表(Project File Type List)  - 显示所有项目文件，按类型组织。
* 项目文件夹浏览器(Project Folder Browser ) - 显示项目的磁盘和目录结构。
* 项目符号类别(Project Symbol Categories ) - 显示所有符号，按符号类型组织。
* 上下文窗口(Context window) - 上下文相关信息窗口。
* 剪辑窗口(Clips Window) - 显示类似剪贴板的剪辑，便于复制和粘贴。
* 书签窗口(Bookmark Window) - 显示已添加书签的地点列表。
* 关系窗口(Relation Windows) - 显示调用树、类树和其他关系。
* Snippet Window - 管理所有代码片段。
* 窗口列表(Window List) - 显示所有打开的文件缓冲区窗口。
* FTP 浏览器(FTP Browser) - 连接到 FTP 服务器。
* 文件比较(File Compare) - 显示两个文件之间的差异。
* 目录比较(Directory Compare) - 显示两个目录之间的差异。

**工具栏**

主工具栏出现在 Source Insight 程序窗口的顶部。 您可以使用“视图”>“工具栏”>“主工具栏”(View > Toolbars > Main Toolbar )命令打开和关闭整个主工具栏。

主工具栏由较小的子工具栏组成。 每个子工具栏都可以使用“视图”>“工具栏”(View > Toolbars)菜单独立显示。 您还可以在主工具栏内拖动子工具栏。

每个工具栏的位置自动保存在配置文件中。

每个工具栏图标对应一个 Source Insight 命令。 有关每个命令的信息，请参阅命令参考章节。

**项目搜索栏**

项目搜索栏用于搜索整个项目。 这是执行基于关键字的搜索以在给定数量的上下文行中查找名称或单词片段的强大方法。 要显示它，请选择“视图”>“项目搜索栏”(View > Project Search Bar)。

![image-20230131143940144](Source Insight 4 用户指南.assets/image-20230131143940144.png)

请参阅：搜索项目。

**文件搜索栏**

文件搜索栏用于在当前文件中进行搜索。 要显示它，请选择“查看”>“文件搜索栏”(View > File Search Bar)。 或者，您可以使用激活搜索栏 (Alt+Shift+F) 来激活它，以便您可以开始在其中输入内容。

![image-20230131144038589](Source Insight 4 用户指南.assets/image-20230131144038589.png)

要设置选项，请单击选项按钮。 请参阅：文件搜索栏选项。

**浏览工具栏**

浏览工具栏显示导航操作，就像在网络浏览器中一样。

![image-20230131144123451](Source Insight 4 用户指南.assets/image-20230131144123451.png)

**标准工具栏**

标准工具栏包含基本的文件操作。

![image-20230131144145544](Source Insight 4 用户指南.assets/image-20230131144145544.png)

## 三、功能及概念

### 项目

Source Insight 最强大的功能是围绕项目设计的。 Source Insight 项目是源文件以及可帮助您快速浏览源代码的关联数据文件的集合。

您可以将现有的源文件或整个源代码树添加到项目中。 您可以在 Source Insight 中创建文件时添加文件。 如果新文件出现在您的源目录或子目录中，也可以通过运行“项目”>“同步文件”(Project > Synchronize Files)命令或让 Source Insight 在后台自动同步，将它们自动添加到您的项目中。 您还可以让 Source Insight 维护项目的主文件列表，它确定项目中的文件。

**项目特色**

Source Insight 项目有几个重要的特点：

* 项目在逻辑上将相关文件分组。
* 当你想打开一个文件时，你不必指定它的驱动器或目录。
* Source Insight 维护一个符号数据库，其中包含有关项目中所有符号声明和引用的数据。 您可以使用 Source Insight 快速定位符号及其引用。 保存源文件时，符号数据库会自动增量更新，以便 Source Insight 始终“知道”符号的位置。 当文件在外部发生更改时，例如通过源代码控制系统，Source Insight 会自动将这些文件与项目符号数据库同步。 请参阅：符号和语言解析。
* Source Insight 可以显示项目中的符号关系，例如调用树、引用树和类层次结构。
* Source Insight 维护一个参考索引，这大大加快了项目范围内对符号参考的搜索。 参考索引会在您编辑和保存文件时逐步更新。
* 每个项目都有自己的会话工作区。 打开项目时，将恢复所有会话状态。 当项目关闭时，所有打开的文件都将关闭并保存工作区。

**项目内部**

一个项目基本上由两部分组成：您的源文件和 Source Insight 维护的项目数据文件。

![image-20230131145235875](Source Insight 4 用户指南.assets/image-20230131145235875.png)

<center>图 3.1 Source Insight 项目的组件</center>

每个项目都包含一个指向您的源文件的文件路径列表。 项目还包含一个符号数据库，由 Source Insight 维护。 您的源文件由 Source Insight、符号声明和定义解析，并且引用记录在符号数据库中。 您所要做的就是将源文件添加到您的项目中； 您不必生成任何其他“标记”文件。 Source Insight 会自动执行此操作。

每个项目都有自己的会话工作区。 工作区包含会话信息，例如打开的文件列表和窗口位置。

**当前项目**

每个 Source Insight 实例一次只允许打开一个项目。 您可以运行多个 Source Insight 实例——每个实例都可以打开一个不同的项目。

有时 Source Insight 会打开其他二级项目来搜索符号声明。 这些是后台项目，您不会意识到它们是打开还是关闭。

在整个文档中，除非另有说明，否则大多数讨论都假定您打开了一个项目。 只要在打开和不打开项目的情况下命令的工作方式有所不同，就会被注明。

**项目目录**

创建项目时，必须为每个项目指定两个目录：

* 项目数据目录(Project Data Directory) - 这是 Source Insight 存储其项目数据文件的地方。 例如，.siproj 文件存储在这里。 默认情况下，当您创建新项目时，Source Insight 在 Documents\Source Insight 4.0\Projects 文件夹中创建一个项目数据目录。
* 项目源目录(Project Source Directory ) - 这通常是本地源存储库树的根目录。 通过维护这两个单独的文件夹位置，您可以将 Source Insight 数据与源文件分开存储。 此外，您的 Source Insight 项目数据文件保存在您自己的用户数据区中，同一台机器上的其他用户将无法访问它们。 如果需要，您可以对两个文件夹位置使用相同的位置。

以下是典型项目设置的示例：

项目数据目录：

`C:\Users\John\Documents\Source Insight 4.0\Projects\MyProj`

其中包含文件 MyProj.siproj - 主项目文件。

项目源码目录：

`c:\work\proj1\src`

其中包含您的源代码，可能包括源代码的子目录。

要编辑项目源目录位置，请使用项目设置(Project Settings)命令。 请参阅：项目设置。

**项目源目录**

项目源目录是您认为的源文件的主要位置。 项目源目录通常是源存储库的最顶层或根目录。 您可能会将其视为项目的“主”目录。 Source Insight 在显示文件名时规范化相对于此目录的项目文件名。 实际上，在创建项目后，您可以使用“项目设置”(Project Settings)命令将源目录设置为磁盘上的任何位置。 这会影响源文件路径的显示方式，因为它们是相对于该目录显示的。

请参阅：您要将项目数据文件存储在何处？

在给定目录中创建项目后，您可以从任何目录和任何驱动器（包括网络驱动器和 UNC 路径）向其中添加文件。

例如，假设我们正在为游戏程序创建一个项目。 源代码树如下所示：

![image-20230131150219721](Source Insight 4 用户指南.assets/image-20230131150219721.png)

我们在“presentation”、“core”和“core”子目录中有源代码。 我们的 Source Insight 项目将包括来自所有这些目录的文件。 我们应该在创建项目时将 c:\game 指定为项目源目录，以便所有文件路径都相对于该目录。

**规范化文件名**

当 Source Insight 显示文件名并且该文件是项目的一部分时，它会排列名称和路径，以便更容易查看和选择基本文件名，而不会妨碍所有目录路径。 此过程称为规范化文件名。 这是一个重要的特性，因为许多项目的文件分布在多个子目录中； 并且“展平”目录树使得键入和选择文件名中最重要的部分变得容易。

规范化文件名始终以叶文件名开头，后面是括号中的目录路径。 此外，显示的目录路径是相对于项目的源目录的，除非文件位于不同的驱动器上。 如果文件在不同的驱动器上，或者不是项目源目录树的一部分，则完整路径显示在括号中。

如果您不希望在项目窗口中看到规范化的文件名，您可以通过使用项目窗口属性(Project Window Properties)命令并选中文件目录(File Directory )框以将单独的列添加到目录名称列表中来将其关闭。

以下是使用上述游戏项目的一些示例：

| 如果文件路径是：            | 文件名显示为：        |
| --------------------------- | --------------------- |
| c:\game\file.c              | file.c                |
| c:\game\core\file.c         | file.c (core)         |
| c:\game\core\io\file.c      | file.c (io)           |
| c:\game\core\enemy\file.c   | file.c (core\enemy)   |
| c:\game\presentation\file.c | file.c (presentation) |
| c:\SomeDir\file.c           | file.c (C:\SomeDir)   |
| d:\OtherDir\file.c          | file.c (D:\OtherDir)  |

**创建一个新项目**

使用 Project > New Project 命令创建一个新项目。 您必须为项目命名并指定希望 Source Insight 存储项目数据的位置。

系统将要求您提供项目名称、文件应存储的位置以及要添加到项目中的源文件。

![image-20230131152005497](Source Insight 4 用户指南.assets/image-20230131152005497.png)

新项目名称

输入您的项目名称。 Source Insight 将创建多个以此名称开头并具有不同扩展名的文件。

你想在哪里存储项目数据文件？

输入要保存由 Source Insight 创建的项目数据文件的文件夹的完整路径。 它们可以与您的源文件位于同一文件夹中，也可以位于单独的位置。 默认情况下，它们是在 Projects 文件夹中的 Source Insight 用户目录下创建的。

我们建议您的数据目录位于本地非网络驱动器上，以获得可靠性和最佳性能。

回答这两个问题后，您将进入“项目设置”对话框。 请参阅：项目设置。

您应该在哪里创建项目？

如果您正在为存储在本地计算机上的源文件创建项目，则在与源文件相同的目录中创建项目数据文件应该没有任何问题。

如果您创建的项目引用共享服务器上的文件，或者您无权写入的任何其他位置，那么您应该在本地计算机上的某个位置创建项目数据。 当“项目设置”对话框出现时，将源文件的位置输入到项目源目录字段中。

您指定为项目数据目录的文件夹将成为默认的项目源目录。 在“项目设置”对话框中，您可以为项目源目录指定不同的路径。 项目源目录通常是包含源文件的最顶层目录的路径。 当 Source Insight 显示文件名时，文件是相对于项目源目录显示的。 如果你把项目源码目录指向包含你大部分源码文件的目录，那么你就不用看很多多余的路径信息了。

此外，如果文件位于项目源目录或该目录的后代中，“自动添加新文件”功能（在选项 > 首选项：常规中(Options > Preferences: General)）只会自动将新文件添加到项目中。

请参阅：同步文件和项目设置。

**新项目设置**

创建项目时，将打开“新建项目设置”对话框。 请参阅：项目设置。

![image-20230131152412190](Source Insight 4 用户指南.assets/image-20230131152412190.png)

为项目设置索引选项

名称片段和成员索引占用磁盘和内存中的索引空间。 它还会稍微减慢数据库访问速度。 您可以控制项目设置对话框中的索引内容。

两个复选框控制索引：

* 快速浏览成员名称(Quick browsing for member names)：选择此项以允许成员名称索引。 启用此选项后，您可以简单地键入类或结构的成员名称，而不是让类型为类或结构名称，后跟一个点 (.) 和成员名称。 取消选择此项将节省磁盘空间和内存。
* 快速浏览符号名称片段(Quick browsing for symbol name fragments)：选择此项以允许名称片段索引。 启用此选项后，您可以键入部分名称片段并查找包含这些名称片段的符号。 取消选中此项将节省磁盘空间和内存。 如果您的项目很大，那么在浏览或与符号数据库同步文件时，Source Insight 可能会运行缓慢。

如果两个复选框都关闭，则项目符号列表面板过滤将恢复为简单的前缀匹配。 但是，每个源窗口左侧的 Symbol Window 和 Project Window 文件列表仍将允许名称片段浏览。

**将文件添加到项目**

创建项目后，接下来需要将源文件添加到项目中。 添加文件的方法有多种。

如果您在 Source Insight 中创建了一个新文件并第一次保存它，Source Insight 会询问您是否要将该文件添加到当前项目中。 如果您正在编写新代码并经常创建新源文件，这将是添加文件的最自然方式。

如果您已有现有的源文件并且想将它们添加到当前项目中，请使用“添加和删除项目文件”(Add and Remove Project File)命令。 此命令将任何现有文件（包括整个目录树）从磁盘上的任何位置添加到当前项目。 请参阅：添加和删除项目文件和添加文件列表。

您还可以通过将文件从 Windows 资源管理器拖放到项目文件列表面板上来将文件添加到项目中。 项目文件列表面板还允许从项目中删除文件。

> 您还可以使用主文件列表来维护项目中的文件。 这对于在不同的机器上以及与其他团队成员一起维护项目很有用。 请参阅：使用主文件列表。

将文件添加到项目具有以下效果：

* 文件名存储在项目的文件名数据库中。 每当 Source Insight 显示文件列表时，该文件名将出现在列表中。 因此，例如，当您使用“打开”命令时，文件名将出现在列表框中。
* 该文件根据其语言类型进行解析。 符号定义被添加到项目的符号数据库中。 用于每个文件的语言解析器由其文件类型决定。 请参阅：文件类型。
* 文件的修改日期记录在文件名数据库中，这样如果文件在 Source Insight 之外被修改，例如通过源代码控制系统，Source Insight 将知道同步项目符号数据库。
* 文件名的显示方式已更改。 文件名“标准化”为项目的源目录。
* 该文件将成为项目代码库的一部分，在显示符号关系（例如调用树）时会对其进行搜索。

您应该将哪些文件添加到项目中？

Source Insight 项目应该只包含程序源文件和文本文件。 将二进制格式文件添加到 Source Insight 项目没有任何意义。 例如，将 exe 或位图文件添加到您的项目中不会有任何好处。

选项 > 文件类型选项(Options > File Type Options)中默认定义的文件类型对应于您可能希望与 Source Insight 一起使用的源文件类型。 通常，只有那些类型的文件应该添加到项目中。

使用文件类型选项来控制添加到项目中的文件类型

文件类型选项对话框包含复选框：添加到项目时包括。 您可以使用此复选框来控制 Source Insight 自动将哪些文件类型添加到您的项目中，或者在“添加和删除项目文件”对话框的列表框中显示哪些文件类型。

将远程网络文件添加到项目

无论出于何种原因，您可能希望直接在网络服务器上访问源文件，而不是从文件的本地副本访问。 当然，您可以直接打开网络上的任何文件。 但是，请记住，您可能会通过打开文件或以其他方式导致文件争用而将其他人锁定在文件之外。 此外，除非将远程文件添加到您的项目中，否则您将无法利用 Source Insight 的项目功能。

使项目直接引用服务器上的文件的一种方法是在您的工作站本地创建一个项目，然后使用“添加和删除项目文件”命令将远程服务器上的文件添加到您的项目中。 这样，Source Insight 符号数据库文件存储在本地计算机上，但源文件仍驻留在服务器上。 请参阅：添加和删除项目文件。

使用项目设置命令，您应该将服务器上的远程源代码目录指定为项目源目录。 这样，文件将相对于主源目录显示，而不是相对于您的本地项目数据文件目录。 请参阅：项目设置。

项目主文件列表

您可以设置一个称为主文件列表的特殊文件并将其与当前项目相关联，而不是通过“添加和删除项目文件”命令手动添加和删除文件。 有关详细信息，请参阅：使用主文件列表。

**从项目中删除文件**

要从当前项目的文件列表中删除文件，请使用“项目”>“添加和删除项目文件”(Project > Add and Remove Project Files)命令。 从项目中删除文件时，该文件中找到的所有符号都会从项目的符号数据库中删除。 Source Insight 实际上不会从磁盘中删除文件。 请参阅：添加和删除项目文件。

> 您还可以使用主文件列表来维护项目中的文件。 这对于在不同的机器上以及与其他团队成员一起维护项目很有用。 请参阅：使用主文件列表。

**使用主文件列表**

您可以使用主文件列表来控制项目中的源文件。 主文件列表是一个文本文件，其中包含项目中每个文件或目录的名称。 要使用它，请选择“项目”>“项目设置”(Project > Project Settings)并启用“主文件列表(the Master File List )”设置。

虽然主文件列表 (MFL) 控制项目中的文件，但您仍然可以使用项目 > 添加和删除文件手动添加或删除文件。 当您从项目中添加或删除文件时，更改将保存到 MFL。 如果 MFL 包含一个不在您的项目中的文件，那么它将自动添加到您的项目中。 如果 MFL 不包含项目中的文件，那么它将自动从项目中删除。

主文件列表可以是源代码存储库的一部分并与其他人共享。 它是一个简单的文本文件，列出了项目中的所有文件（和/或目录）。 MFL 在您从项目中添加或删除文件时得到维护。 如果您添加或删除文件，更改将保存到 MFL，当推出或签入 MFL 时，您的团队成员将在他们的 Source Insight 与 MFL 同步时自动获得添加或删除。

主文件列表格式

主文件列表中的每一行都应该包含一个相对于项目源目录的路径。 它可以是一个简单的文件名、一个通配符（如 open*.c）或一个目录名。

如果行项目是目录名称，则该目录中与已知文件类型匹配的所有文件都包含在项目中。 不包括子目录及其内容。

以分号 (;) 字符开头的行是注释。

这是一个例子：

````
; Source Insight Project File List 
; Project Name: WorkTest 
; Generated by Source Insight 4.00.0048 at 11/19/2015 1:41:06 PM 
; Version=4.00.0048 
; 
; Each line should contain either a file name, a wildcard, or a sub-directory name. 
; File paths are relative to the project source root directory. 
; 
FM15Output\copycss.bat 
FM15Output\custom-table.css 
FM15Output\custom.css 
devices 
console\get.c
console\put.c
cmd*.c 
cmd*.h
````

上面的示例使用了特定文件名、通配符和目录名（设备）的组合。 所有名称都相对于项目源目录根目录。

生成主文件列表

如果您已经构建了一个项目并且想要使用主文件列表，请选择“项目”>“导出项目文件列表”(Project > Export Project File List )以创建一个新的文件列表。 选择 Project > Project Settings 并在 Master File List Path 部分指定文件列表。

编辑主文件列表

您可以通过选择“项目”>“打开项目主文件列表”(Project > Open Project Master File List)直接编辑主文件列表。 通常您不需要编辑它，因为在您从项目中添加和删除文件时，Source Insight 会自动更改它。 但是，您可以自由编辑它。 保存文件时，Source Insight 会将项目与新版本的主文件列表重新同步。

与主文件列表同步

Source Insight 定期检查磁盘上的主文件列表是否已更改。 当检测到更改时，它会与它重新同步。 这可能导致将新文件添加到项目中，或从项目中删除文件。 如果您的主文件列表是源代码存储库的一部分，这将很方便。 例如，如果同事向项目中添加了一个新文件，当您获得新版本的存储库时，新的源文件将自动添加到您的 Source Insight 项目中。

**打开和关闭项目**

要打开不同的项目，请使用“项目”>“打开项目(Project > Open Project )”命令（请参阅：打开项目。）Source Insight 一次只允许您打开一个项目，因此如果您已经打开了一个项目，它会询问您是否“ 确定要关闭当前项目并保存对文件的任何更改。 假设您确实关闭了当前项目，“打开项目”命令将显示一个现有项目的列表框，您可以从中进行选择。

要关闭当前项目而不打开任何项目，请使用“关闭项目(Close Project )”命令。 Source Insight 会询问您是否要保存已打开且已更改的每个文件，然后它会关闭所有文件。

**删除项目**

要删除项目，请使用删除项目命令。 此命令删除 Source Insight 创建并与项目关联的所有项目数据文件。 您的源文件不会被删除。 请参阅：删除项目。

**复制项目**

项目 > 复制项目(Project > Copy Project )命令将当前项目复制到新名称和位置。 新项目是通过克隆当前项目数据文件创建的。 您的源文件将不会被复制。 新项目将指向相同的源文件。 如果在复制原始项目后将其删除，则实际上已重命名该项目。 请参阅：复制项目。

**只读项目**

有时将项目设置为只读是有意义的，而 Source Insight 允许这样做。 如果项目仅用作导入库，或者项目仅存在于项目符号路径上以供自动完成使用，则该项目应该是只读的。 此外，一个只读项目可以由多个 Source Insight 实例同时打开。

当 Source Insight 在后台打开一个项目以获取用于自动完成或其他面向引用的用途的符号信息时，它会以只读方式打开该项目，以便 Source Insight 的其他实例也可以打开该项目。

要使项目始终以只读方式打开，请设置项目的 .siproj 文件的只读文件属性，该文件存储在项目的数据目录中。

打开只读项目时，您将无法在项目中保存任何文件，也无法在项目中添加或删除文件。

**更改项目设置**

项目设置命令设置管理当前项目的各种选项。 如果当前没有打开的项目，则“项目设置”命令会设置由后续创建的项目继承的默认选项。

创建新项目时，会出现“项目设置”对话框。

您可以指定项目是否有自己的私有配置，或者它是否使用全局配置文件。 您还可以指示项目的源目录在哪里，以及应该索引哪些类型的符号信息。

请参阅：项目设置。

**符号和项目**

Source Insight 在您编辑时从源文件中动态解析符号定义。 符号信息存储在磁盘上的索引符号数据库中，该数据库是项目不可或缺的一部分。

当您打开和保存文件时，符号数据库会逐渐更新。 其他项目团队成员更改的文件也会在后台自动与符号数据库同步。 您通常不需要执行任何操作来使 Source Insight 的符号信息保持最新。

**同步项目文件**

Source Insight 使用同步过程使文件和符号相对于其项目数据库保持最新。 这在不使用 Source Insight 编辑文件时很有用。 例如，您可能正在使用更新计算机上文件的源代码控制系统，或者您可能拥有由构建过程生成的机器文件。 当发生这种情况时，Source Insight 必须重新解析那些过时的文件以使 Source Insight 项目保持最新。 通常，这是在后台自动为您完成的，但您可以使用“项目”>“同步文件”命令手动完成。

同步过程确保整个项目都是最新的。 它扫描项目中的每个文件，并更新自 Source Insight 上次打开文件以来修改过的每个文件的符号数据库。

同步过程还可以选择在新文件出现或从目录中消失时自动添加和删除文件。 这些选项在选项 > 首选项：常规选项中设置。 请参阅：常规选项。

您还可以使用主文件列表来控制项目中的文件。 如果您使用此选项，则同步过程会使用主文件列表根据需要添加或删除文件。 请参阅：使用主文件列表。

要同步项目中的文件：
您可以通过以下两种方式之一同步项目：

* 默认值：如果在“选项”>“首选项：常规”中启用了“后台同步”选项，则当您继续在 Source Insight 中编辑时，将在后台同步项目。 请参阅：常规选项。 你基本上不需要做任何事情。
* 您可以运行同步文件(Synchronize Files )命令，它会按需同步项目。 请参阅：同步文件。

通常，如果您打开一个自 Source Insight 打开后修改过的文件，则符号数据库会在您打开该文件时自动更新。 通过自动同步，更新对您来说是透明的。 但是，如果符号从一个文件移动到另一个文件，您可能会发现 Source Insight 会忘记符号的位置，除非两个文件都与项目同步。 此外，如果定义了新符号，则 Source Insight 在同步包含的文件之前不会知道它们。

**基础项目**

Source Insight 自动创建一个名为 Base 的项目。 当 Source Insight 在其他地方找不到符号定义时，它会搜索 Base 项目。 它隐含在项目符号路径的末尾。

> 您不必将 Base 项目添加到项目符号路径。 Source Insight 会自动搜索它，就像它在列表中一样。

这为您提供了一个方便的地方来保存常用符号。 存储在基础项目中的任何符号对任何其他项目都是可见的。 Base 项目也是添加您最喜欢的 Source Insight 编辑器宏文件的好地方。

**创建项目的 Web 版本**

您可以将项目源的快照创建为一组网页。 您可以使用任何 Web 浏览器来浏览您的源代码。 生成的网页将具有接近 Source Insight 中显示的语法格式。

使用“项目”>“将项目导出到 HTML”(Project > Export Project to HTML )命令保存一组新的 HTML 文件。 请参阅：将项目导出为 HTML。

**重建项目**

有时，如果您怀疑数据文件已损坏或太过时，您可能需要重建项目。

如果您仍然可以打开您的项目，请使用“项目”>“重建项目”(Project > Rebuild Project )命令重建它。 这将重建所有 Source Insight 数据文件。 请参阅：重建项目。

当您打开项目时，Source Insight 会自动检测项目是否已损坏。 如果检测到损坏，它将在那时重建项目。

### 工程窗口

有几个项目相关的面板窗口。 当您视图 > 面板 > 项目窗口(View > Panels > Project Window)时，将出现主项目窗口。 项目窗口默认设置为所有项目相关面板的选项卡式容器，例如项目文件列表和项目符号列表。 每个项目面板都有一个选项卡。

项目窗口可以停靠在 Source Insight 主应用程序窗口的一侧，也可以浮动在前面。

与任何分组面板一样，您可以单击任何项目面板的选项卡并将其拖出到其自己的浮动窗口中，或将其单独停靠。

**项目文件列表**

项目文件列表显示项目中的所有文件。 您可以在其中键入以快速打开文件； 无论它们位于哪个目录中。大多数文件只需敲击几下鼠标即可打开。 您还可以键入通配符并通过在文本框中键入并按 Enter 键直接更改工作目录。

![image-20230131162928459](Source Insight 4 用户指南.assets/image-20230131162928459.png)

使用名称片段匹配，您可以键入文件名的一部分来定位文件，而无需担心目录名。

扩展通配符
如果键入通配符规范并按 Enter，则文件列表将被过滤以匹配该规范。 例如，如果您键入 *.c 并按 Enter，您将看到项目中的所有 *.c 文件，而不考虑目录。 要删除通配符，请按 *（星号）并按 Enter。

浏览非项目文件
如果要浏览磁盘并查看不一定属于项目的文件，请键入点 (.) 并按 Enter。 当前工作目录内容将填充列表。 要返回文件的“仅项目”视图，请键入 **（两个星号）并按 Enter。 或者，您可以切换到“项目文件夹浏览器”面板来浏览目录内容。

**项目符号列表**

项目符号列表显示项目中的所有符号。 您可以快速键入大多数文件的前几个字符以快速打开它们，而无需导航至任何目录。

![image-20230131163110906](Source Insight 4 用户指南.assets/image-20230131163110906.png)

要快速定位符号，请键入符号名称的一部分，列表将在您键入时被过滤掉。 您还可以使用名称片段匹配来查找部分符号名称。 例如，如果您键入：

`doc write`

这将匹配符号名称，例如 DocWrite、WriteDoc、WriteOpenDoc、CanWriteAnyDoc 等。请参阅：名称片段匹配符号名称。
正则表达式搜索

您还可以通过在正则表达式前加上问号 (?) 作为符号名称的正则表达式搜索。 例如，

`?Insert.*Stack`

将找到所有具有“Insert”，后跟零个或多个字符，再后跟“Stack”的符号。

仅查找函数

您可以通过在文本末尾添加左括号将搜索结果限制为仅功能符号。 例如：

`Open(`

只会找到名称中包含 Open 的函数。

结合上下文窗口和关系窗口

上下文窗口和关系窗口都跟踪项目符号列表中的当前选择。 因此，如果您在项目符号列表中选择一个函数，上下文窗口将自动显示该函数的定义。 关系窗口将自动显示函数的调用树或引用树。 （“关系”窗口有一些选项，您可以设置这些选项来告诉它您想要看到的内容。）请参阅：关系窗口。

**项目文件夹浏览器**

项目文件夹浏览器显示磁盘目录和文件。 这允许您执行一些基本的目录和文件维护，并轻松打开非项目文件。

![image-20230131163433551](Source Insight 4 用户指南.assets/image-20230131163433551.png)

文件类型视图

文件类型视图按文件类型显示项目源文件的细分。

![image-20230131163510788](Source Insight 4 用户指南.assets/image-20230131163510788.png)

项目符号类别

项目符号类别面板显示按符号类型分类的符号。

![image-20230131163535697](Source Insight 4 用户指南.assets/image-20230131163535697.png)

### 符号和语言解析

Source Insight 最重要的优势之一是它在您编辑时对源代码进行静态分析。 它的语言解析器确定符号在项目中的定义位置以及使用位置。 它根据该分析显示带有语法格式的源代码。

语言

Source Insight 使用语言抽象来封装各种编程语言的属性。 对于给定的文件缓冲区，文件名决定了它的文件类型。 文件类型决定了它的语言解析器。 选项 > 文件类型选项对话框用于将文件类型与文件扩展名和语言相关联。 例如，Java 源文件文件类型使用 *.java 文件过滤器将 Java 文件与该文件类型相关联。 此外，Java 源文件文件类型指定了 Java 语言解析器。 请参阅：文件类型选项。

要查看当前支持的语言列表，请使用选项 > 首选项：语言对话框。 程序更新中会不时将新语言添加到列表中。 请参阅：语言选项。

Source Insight 中的语言分为两类：内置语言和自定义语言。

**内置语言**

Source Insight 包含对多种语言的内置优化支持，包括 C/C++、C#、Java、Objective-C、Python、Perl、ASP、Visual Basic 等。

大多数内置语言都支持额外的功能，例如查找引用和生成调用树。

**自定义语言**

您还可以使用选项 > 首选项：语言对话框将您自己的自定义语言支持添加到 Source Insight。 自定义语言是一种简单的通用语言，它指定了语法规则、语法格式化关键字和简单的解析表达式。 请参阅：语言选项。

也可以导出和导入自定义语言。

添加自定义语言

添加对新语言的支持基本上是一个两步过程：

1.添加语言，使用选项 > 首选项：语言。 请参阅语言选项。

2.使用选项 > 文件类型选项添加引用语言的文件类型。 请参阅文件类型。

> “文件类型”对话框仍然允许您将自定义解析模式直接添加到文件类型属性中，而不是添加新语言。 但是，您可以通过添加新的自定义语言并使用您的文件类型指向新语言来进行更多控制。

命令参考中的语言选项主题包含有关自定义语言属性的更多详细信息。 请参阅：语言选项。

**符号命名**

在 Source Insight 中，符号名称存储为“点路径”。 虚线路径包含符号的容器名称，后跟一个点 (.) 和符号的名称。 例如，类的成员可能如下所示：

`MyClass.member`

声明嵌套在另一个符号内的所有符号都将具有虚线路径。 如果您查看项目窗口中列出的符号，您将看到虚线路径。 即使在像 C++ 这样的语言中，范围解析运算符 :: 用于声明成员，符号名称在内部存储为点路径。

在键入符号的全名时，如果您还想指定其容器，则应在符号名称中使用点。

>  符号的名称中可能包含嵌入的点 (.) 字符。 Source Insight 将存储符号名称，以便嵌入的点不会与虚线路径点字符混淆。

**解析符号定义**

当 Source Insight 显示源代码时，它会根据声明来格式化标识符。 例如，它是函数、类还是结构？ 是局部变量吗？ 是班级成员吗？ 等等。 Source Insight 使用其符号查找引擎来解析标识符的声明。

当 Source Insight 查找符号定义时，它会按特定顺序搜索以找到它。

1. 它搜索所有打开的文件和当前项目的符号数据库（如果项目是打开的）。
2. 搜索项目的导入库列表。 请参阅：从库中导入符号。
3. 搜索全局导入库列表。
4. 它搜索项目符号路径中的每个项目。
5. 最后搜索Base项目。

**共同项目**

考虑这样一种情况，当您拥有一组经常用于多个项目的库中的头文件时。 您可以将这些文件添加到您的每个项目中，但这将是多余的。 更好的解决方案是为每组公共头文件创建一个公共项目，并让 Source Insight 从任何打开的项目中搜索公共项目。

公共项目使您能够创建更小的、独立的项目，但仍然能够在其他项目中定位符号声明。 Base 项目（请参阅：The Base Project。）是 Source Insight 查找符号的最终位置； 它隐含在项目符号路径的末尾。

共同项目有两种使用方式：

* 您可以将公共项目添加为导入库项目。 有全局和项目特定的导入库列表。 请参阅：从库中导入符号。
* 您可以将公共项目放到项目符号路径中。 无论当前项目是什么，都只会使用一个项目符号路径。 请参阅：项目符号路径。

Source Insight 将搜索导入库项目和项目符号路径，每当它查找符号但无法在当前项目或打开的文件中找到它时。

**从库中导入符号**

您可以从外部源导入符号，例如 INCLUDE 路径头文件、Java 包和 .NET 程序集。 Source Insight 为导入的符号创建一个特殊的导入库项目。 您可以使用 Project > Import Library Symbols 对话框来维护导入库项目的列表。 请参阅：导入外部符号。

导入库是一个特殊的 Source Insight 项目，其符号来自外部源。 可以从以下类型的文件中导入符号：

* INCLUDE 路径下的所有源文件
* .NET .dll 文件
* .NET .dll 文件的整个目录树
* Java .jar 文件
* Java 类文件
* Java .class 文件的整个目录树
* 源文件的整个目录树（例如 *.h 文件）
* 另一个 Source Insight 项目

当您从这些来源之一导入符号时，会创建一个新的特殊 Source Insight 项目来保存这些符号，Source Insight 会自动打开并搜索这些导入项目。

> 导入项目的名称中有一个“_import_”前缀。 您可以通过选择项目 > 打开项目并启用“显示导入项目”来打开导入项目。 项目列表将包含您的所有项目以及导入项目。

既有全局导入库列表，也有项目特定的导入库列表。 因此，导入库比使用工程符号路径更灵活。

全局导入库列表
Source Insight 维护一个单一的全局导入库列表，用于所有项目，或者在您没有打开项目的情况下。 当需要查找符号时，将搜索导入列表。 要管理此列表，请选择 Project > Import External Symbols。

特定于项目的导入库列表
每个项目还包含一个导入库列表，仅当该项目是当前项目时才使用。 当需要查找符号时，将搜索导入列表。 要管理特定于项目的列表，请选择“项目”>“为当前项目导入外部符号”，或选择“项目”>“项目设置”，然后单击“导入符号”按钮。

通过导入列表只能找到定义
导入库仅用于定位符号定义。 它们不用于定位符号引用，也不用于搜索文件或智能重命名。 这些操作仅适用于当前项目中的文件。

**项目符号路径**

项目符号路径是 Source Insight 在查找符号定义时将搜索的常见项目的分隔列表。 它在所有打开的文件、当前项目和导入库项目之后被搜索。

无论当前项目是什么，都只会搜索一个项目符号路径。

搜索项目符号路径中的每个项目。 如果仍未找到该符号，则搜索 Base 项目。 如果找到多个具有指定名称的符号，Source Insight 将要求您从匹配符号、它们的位置和类型的列表中进行选择。

您可以使用 Options > Preferences: Symbol Lookups 命令编辑项目符号路径。 请参阅：符号查找选项。

您可以在首选项：符号查找对话框中启用始终搜索符号路径选项。 启用此选项后，每次 Source Insight 查找符号时都会搜索符号路径中的所有项目，即使该符号已在打开的文件或当前项目中找到。 如果您想要查看您的项目中是否有冗余（或至少相似命名的）符号以及项目符号路径上的任何其他符号，您可能需要打开此选项。

项目符号路径仅用于定位符号定义。 它不用于定位符号引用，也不用于搜索文件或智能重命名。 这些操作仅适用于当前项目中的文件。

**C/C++ 符号**

在编辑 C/C++ 文件时，Source Insight 可以为标准库执行符号补全，例如 C-runtime、STL、WinAPI 或任何其他库，例如 Boost。 这是通过从计算机上的 C/C++ 文件和头文件中导入符号来实现的。

要导入 C/C++ 运行时符号，请使用项目 > 导入外部符号命令，或使用首选项：符号查找对话框并单击导入符号按钮。

要导入 C/C++ 运行时符号：

1. 在选项 > 首选项：符号查找对话框中，单击导入符号按钮。
2. 在“导入外部符号”对话框中，单击“添加...”按钮。 如果您已有 INCLUDE 路径环境变量，则单击从 INCLUDE 路径导入。 否则，您可以单击从源代码树导入并导航到包含运行时库包含文件的目录。
3. 将扫描目录并将符号声明提取到一个称为导入库的特殊项目中。 这可能需要几分钟，具体取决于遇到的文件数量。

现在，自动完成应该适用于头文件中定义的符号。

**C# 和 .NET Framework 符号**

在编辑 C# 文件时，Source Insight 可以为 .NET Framework 类库符号执行符号补全。 这是通过从计算机上的 .NET Framework 程序集中导入符号来实现的。

要导入 .NET Framework 程序集，请使用“项目”>“导入外部符号”命令，或使用“首选项：符号查找”对话框并单击“导入符号”按钮。

要导入 .NET Framework 符号：

1. 在选项 > 首选项：符号查找对话框中，单击导入符号按钮。
2. 在“导入外部符号”对话框中，单击“添加...”按钮。 单击下一步导入 .NET 程序集的目录树。 导航到包含 .NET Framework 程序集的目录。 这通常位于 C:\Windows\Microsoft.NET\Framework\v2.0.50727 等位置。 选择目录并单击确定。
3. 包含.NET dll 的目录树将被扫描，符号声明将被提取到一个称为导入库的特殊项目中。 这可能需要几分钟时间，因为有许多 .NET Framework 程序集。

现在，自动完成应该适用于使用 using 语句导入到 C# 源文件中的包。

**Java 符号**

在编辑 Java 文件时，Source Insight 可以为标准 Java 运行时库执行符号补全。 这是通过从您机器上的 Java jar 文件导入符号来完成的。

要导入 Java 运行时符号，请使用项目 > 导入外部符号命令，或使用首选项：符号查找对话框并单击导入符号按钮。

要导入 Java 运行时符号：

1. 在选项 > 首选项：符号查找对话框中，单击导入符号按钮。
2. 在“导入外部符号”对话框中，单击“添加...”按钮。 单击下一步导入 Java jar 文件。 导航到包含运行时库的 jar 文件。 这通常位于 C:\Program Files (x86)\Java\jre6\lib\rt.jar 等位置。 选择 jar 文件并单击打开。
3. jar 文件将被扫描，符号声明将被提取到一个称为导入库的特殊项目中。 由于 jar 文件很大，这可能需要几分钟时间。

现在，自动完成应该适用于使用 import 语句导入到 Java 源文件中的包。
**HTML 和脚本**

HTML 文件类型使用 HTML 语言解析器，解析 HTML 元素和客户端脚本元素。 客户端脚本块将使用适用于所用脚本语言的语法格式显示。 脚本中定义的符号也显示在符号窗口中，并保存在符号数据库中。

HTML 文件类型使用 HTML 语言解析器，解析 HTML 元素和客户端脚本元素。 客户端脚本块将使用适用于所用脚本语言的语法格式显示。 脚本中定义的符号也显示在符号窗口中，并保存在符号数据库中。

**PHP 页面**

PHP 文件类型使用 PHP 页面语言解析器，支持带有嵌入式 HTML 的 PHP 以及客户端脚本。 PHP 脚本块将使用 PHP 的语法格式和客户端脚本元素的适当格式出现。 PHP 符号也显示在符号窗口中，并保存在符号数据库中。 关系窗口将显示 PHP 符号的引用和调用树。

Source Insight 支持 PHP 脚本开始标记：\<? 和 \<?= 和 \<?php 。 PHP 结束脚本标记是 ?>。 不支持已弃用的 <% 和 %> 标记。 Source Insight 解析脚本和 HTML。

为了填充符号信息，Source Insight 从同一文件解析多个流：一个用于服务器端 PHP，一个用于客户端 HTML。 此外，客户端可能包含 HTML 脚本元素。 鉴于 PHP 页面的典型编写方式，来自 PHP 页面文件的 HTML 元素通常由 Source Insight 解析和识别。 但是，它不能保证工作，因为 PHP 片段可能会发出冲突的 HTML 标记，或者它们可能是无序的。

您可能会注意到在选项 > 首选项：语言中，有一个单独的 PHP 语言未绑定到文件类型。 这个负责解析纯PHP代码，根本不懂交错的HTML。 一种单独的语言类型：PHP 页面解析器将 HTML 和 PHP 服务器端部分代理为 HTML 或 PHP 语言。

**活动服务器页面脚本**

Active Server Page (ASP) 文件类型使用 Active Server Page 语言解析器，支持带有嵌入式服务器端脚本的 HTML，以及客户端脚本元素。 脚本块将使用适用于所用脚本语言的语法格式显示。 脚本中定义的符号也显示在符号窗口中，并保存在符号数据库中。

您可以在选项 > 首选项：语言对话框中指定要在 HTML 或 ASP 中使用的默认脚本语言。 单击“特殊”按钮并在“默认脚本语言”处选择默认语言。

Source Insight 支持使用开始标记 <% 和结束标记 %> 的嵌入式 ASP 脚本。 Source Insight 解析脚本和 HTML。 Source Insight 支持嵌入 HTML 中任何位置的脚本部分，就像 Web 服务器一样。

为了填充符号信息，Source Insight 从同一文件解析多个流：一个用于服务器端 ASP 脚本，一个用于客户端 HTML。 此外，客户端可能包含脚本元素。 Active Server Page 解析器将 HTML 和服务器端脚本代理为不同的语言，具体取决于 ASP 文件中指定的语言。

### 条件解析和预处理器支持

本节讨论主要适用于使用预处理器并具有 #if 或 #ifdef 语句的 C/C++ 和 C# 语言文件的功能和问题。

使用非活动代码 - ifdef 支持

Source Insight 可以识别在编译时使用支持这些语句的语言中的#ifdef、#if 和#elif 指令禁用的非活动代码块。 有条件标识符值的项目特定列表和全局列表。 要编辑条件常量值，请选择选项 > 首选项：语言并单击“项目特定条件”或“全局条件”。 请参阅：条件解析列表。 您还可以使用源窗口右键单击菜单中的“编辑条件”命令来编辑条件。 请参阅：编辑条件。

> 只有在“编辑条件”对话框中指定了所有条件值时，才会解释#if 和#ifdef 等条件语句。

默认情况下，Source Insight 完全忽略条件指令。 它试图理解条件编译构造中的所有分支。 通常，这很有效，因为条件分支中的声明不会相互干扰。

然而，有时一个棘手的声明可能会在中间被#ifdef 打破。 这通常会混淆 Source Insight。 例如：

![image-20230131171238540](Source Insight 4 用户指南.assets/image-20230131171238540.png)

如果您对非活动代码不感兴趣，您可以指定条件值。 请参阅：条件解析。

非活动代码使用非活动代码样式进行格式化。

非活动代码块以“非活动代码”样式显示。 例如：

![image-20230131171245443](Source Insight 4 用户指南.assets/image-20230131171245443.png)

<center>图 3.2 显示“Inactive Code”样式</center>

条件解析

条件解析仅适用于在 Source Insight 中支持条件编译的语言：C/C++、C# 等。请参阅：编辑条件。

Source Insight 维护两种类型的条件变量列表。

* 全局条件列表。 这适用于所有项目。 此列表保存在配置文件中，其中包含您的自定义设置。
* 项目特定条件列表。 此列表与每个项目一起保存。 您可以为每个单独的项目定义不同的条件变量。 例如，您可以在一个项目中定义“RELEASE”，在另一个项目中定义“DEBUG”。

当 Source Insight 解析文件时，这两个条件列表会合并。 项目特定条件优先于全局条件。

条件变量

条件变量可以用在#if、#ifdef、#ifndef 和#elif 语句的表达式中。 这些通常是在头文件或编译器命令行中定义的常量值。 例如：

```c
#if VER < 3 && DEF_OPEN != 0
   ....
```

在此示例中，使用了两个条件变量：VER 和 DEF_OPEN。 可以使用“编辑条件”命令指定每个变量值。 请参阅：编辑条件。

每个条件变量都可以有任何文本值。 与在 C 和 C++ 中一样，任何等于零的数值都被认为是“假”，任何非零值都被认为是“真”。

忽略条件变量

如果您没有指定变量的值，那么任何包含该变量的预处理器语句都会被跳过并被忽略。 这是 Source Insight 中任何 #if-type 语句的默认行为。 如果未使用“编辑条件”对话框定义条件，则 Source Insight 将忽略条件，#if-#else 块的所有分支都将由 Source Insight 进行解析。

例如：

```c
#if VER < 3 && WINVER >= 5
   int a = 1;
#else
   int a = 2;
#endif
```

如果 VER 和 WINVER 都是使用编辑条件定义的，那么将计算#if 语句中的表达式，并且只有一个分支将处于活动状态。 但是，如果这些变量中的任何一个未在 Source Insight 中定义，则两个分支都将处于活动状态。

编辑条件变量

要编辑条件变量的值，请右键单击它并选择编辑条件。 请参阅：编辑条件。 当您编辑条件列表时，Source Insight 会询问您是否要重新解析整个项目。 您应该首先对条件列表进行所有更改，然后重新解析整个项目。 在重新解析您的项目之前，存储在 Source Insight 符号数据库中的符号信息不会反映您所做的更改。

**解析注意事项和解析问题**



### 名称片段匹配符号名称

### 源代码管理

### 文件类型

### 浏览和分析

### 语法格式和样式

### 上下文窗口

### 关系窗口

### 代码片段

### 剪辑窗口

### 书签

### 搜索和替换文本

### 正则表达式

### 使用选择历史导航

### 滚动和选择文本

### 概述和折叠文本

### 文件缓冲区基础

### 从崩溃中恢复

### 命令行语法

### 自定义设置和配置

### 性能调优

### Source Insight 创建的文件

## 四、命令索引

## 五、宏语言指南

## 六、宏事件处理